"use strict";var S=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var n=(t,o)=>()=>(t&&(o=t(t=0)),o);var c=(t,o)=>{for(var r in o)S(t,r,{get:o[r],enumerable:!0})},J=(t,o,r,e)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of M(o))!A.call(t,s)&&s!==r&&S(t,s,{get:()=>o[s],enumerable:!(e=R(o,s))||e.enumerable});return t};var u=t=>J(S({},"__esModule",{value:!0}),t);var a,m,d,i=n(()=>{"use strict";a=[{id:1,status:"enabled",name:"Softtek Las Rozas",description:"Madrid, Spain",created_date:"2020-08-03T20:21:43.794Z",deleted_date:"0001-01-01T00:00:00+4:00"},{id:2,status:"enabled",name:"Softtek Las Tablas",description:"Madrid, Spain",created_date:"2020-08-03T20:21:43.794Z",deleted_date:"0001-01-01T00:00:00+4:00"},{id:3,status:"enabled",name:"Softtek Coru\xF1a",description:"Coru\xF1a, Spain",created_date:"2020-08-03T20:21:43.794Z",deleted_date:"0001-01-01T00:00:00+4:00"}],m=class{getSoftteks=async o=>{try{return a.length>0?{statusCode:200,body:JSON.stringify({data:a})}:{statusCode:404,body:JSON.stringify({description:"No softteks found in the system"})}}catch(r){throw r}};getSofttekById=async o=>{try{let r=await a.filter(e=>e.id==o.params.id);return r.length==1?{statusCode:200,body:{message:`Sofftek with Id ${o.params.id} Fetched Successfully`,data:r}}:{statusCode:200,body:{description:"No softtek found in the system"}}}catch(r){throw r}};createSofttek=async o=>{try{let{name:r,description:e}=JSON.parse(o.body||"{}");if(console.log(`${r} ${e}`),r===void 0||r==="")return{statusCode:200,body:{description:"Name is required",field:"name"}};if(!!await(a.filter(f=>f.name==r).length>0))return{statusCode:409,body:{code:"ENTITY_ALREAY_EXISTS",description:"Name Already Exists",field:"name"}};let p={id:a.length+1,status:"enabled",name:r,description:e??"",created_date:new Date,deleted_date:"0001-01-01T00:00:00+4:00"};return a.push(p),{statusCode:200,body:{code:"BAD_REQUEST_ERROR",description:`Softtek ${r} was created!`}}}catch(r){throw r}};updateSofttek=async o=>{try{let r=o.params.id,{name:e,description:s}=JSON.parse(o.body||"{}");if(console.log(`${e} ${s}`),!!!await(a.filter(y=>y.id==r).length>0))return{statusCode:404,body:{code:"BAD_REQUEST_ERROR",description:"No softtek found in the system"}};let f={name:e??"",description:s??""},l=await a.findIndex(y=>y.id==r);if(f.description!=""&&(a[l].name=f.name),f.description!=""&&(a[l].description=f.description),l||l==0)return{statusCode:200,body:{code:"BAD_REQUEST_ERROR",description:`Softtek ${e} was updated!`}};throw new Error("Something went worng")}catch(r){throw r}};deleteSofttek=async o=>{try{let r=o.params.id,e=await a.findIndex(s=>s.id==r);if(a[e].status="disabled",e||e==0)console.log("Softtek was deleted!");else return{statusCode:404,body:{code:"BAD_REQUEST_ERROR",description:"No softtek found in the system"}}}catch(r){throw r}}},d=m});var k={};c(k,{handle:()=>B});var B,h=n(()=>{"use strict";i();B=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var g={};c(g,{handle:()=>D});var D,E=n(()=>{"use strict";i();D=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var T={};c(T,{handle:()=>U});var U,w=n(()=>{"use strict";i();U=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var I={};c(I,{handle:()=>$});var $,b=n(()=>{"use strict";i();$=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var N={};c(N,{handle:()=>G});var G,P=n(()=>{"use strict";i();G=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var _={};c(_,{handle:()=>Q});var Q,O=n(()=>{"use strict";i();Q=async t=>{let o=t.httpMethod,r=t.queryStringParameters?t.queryStringParameters.sofftekId:null,e=new d;switch(o){case"GET":return r?e.getSofttekById(t):e.getSoftteks(t);case"POST":return e.createSofttek(t);case"PUT":return e.updateSofttek(t);case"DELETE":return e.deleteSofttek(t);default:return{statusCode:405,body:JSON.stringify({message:"Method Not Allowed"})}}}});var L={"/api/v1/softtek":(h(),u(k)),"/api/v1/softtekian":(E(),u(g)),"/api/v1/event":(w(),u(T))},C=L;var Z={"/api/v2/softtek":(b(),u(I)),"/api/v2/softtekian":(P(),u(N)),"/api/v2/event":(O(),u(_))},x=Z;var F={...C,...x},q=F;exports.handler=async function(t){let o;try{let r=q[t.path];r?o=await r.handle(t):o={statusCode:404,body:JSON.stringify({message:"Not Found!"})}}catch(r){o={statusCode:500,body:JSON.stringify({message:"Internal Server Error "+r})}}return o};
//# sourceMappingURL=server.js.map
